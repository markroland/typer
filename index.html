<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Typer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <style type="text/css">
        html{
            height: 100%;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body{
            background-color: rgb(240,240,240);
            height: 100%;
            margin: 0;
            padding: 8px;
        }

        #target{
            color: rgb(0,0,0);
            background-color: rgb(255,255,255);
            font-size: 100vh;
            height: 100%;
            line-height: 1em;
            text-align: center;
            overflow: hidden;
        }

        #startup{
            font-size: 16px;
        }
    </style>
    <script src="responsivevoice.js"></script>
    <script type="text/javascript">
        /**
         * Self-calling onload function
         **/
        document.onload = function(){

            /**
             * Convert key code to ASCII
             * event.type must be keypress
             **/
            function getChar(event) {

                // Debugging
                // console.log('Charcode: ' + event.charCode + ', RKeycode: ' + event.keyCode + ', Which: ' + event.which + ' = ' + String.fromCharCode(event.which) );
                // console.log(event);

                // Initialization
                glyph = '';

                // Numbers
                if(event.keyCode >= 48 && event.keyCode <= 57){
                    glyph = String.fromCharCode(event.keyCode);
                }

                // Alphabet
                if(event.keyCode >= 65 && event.keyCode <= 90){
                    glyph = String.fromCharCode(event.keyCode);
                }

                // Others
                switch(event.keyCode){
                    case 186:
                        glyph = ';';
                        break;
                    case 187:
                        glyph = '=';
                        break;
                    case 188:
                        glyph = ',';
                        break;
                    case 189:
                        glyph = '-';
                        break;
                    case 190:
                        glyph = '.';
                        break;
                    case 191:
                        glyph = '/';
                        break;
                    case 192:
                        glyph = '~';
                        break;
                    case 219:
                        glyph = '[';
                        break;
                    case 220:
                        glyph = '\\';
                        break;
                    case 221:
                        glyph = ']';
                        break;
                    case 222:
                        glyph = '\'';
                        break;
                    case 37:
                        glyph = '←';
                        break;
                    case 38:
                        glyph = '↑';
                        break;
                    case 39:
                        glyph = '→';
                        break;
                    case 40:
                        glyph = '↓';
                        break;
                    case 91:
                        glyph = '⌘';
                        break;
                    case 93:
                        glyph = '⌘';
                        break;
                }

                if(glyph == ''){
                    glyph = '⊗';
                }

                return glyph;

            }

            /**
             * Convert key code to ASCII
             **/
            document.onkeydown = function(event) {

                var dom_target = document.querySelector('#target');

                var letter = getChar(event);

                responsiveVoice.speak(letter.toLowerCase());

                dom_target.style.color = 'rgb(' + Math.round(255 * Math.random()) + ',' + Math.round(255 * Math.random()) + ',' + Math.round(255 * Math.random()) + ')';

                if (letter.charCodeAt(0) >= 65 && letter.charCodeAt(0) <= 90){
                    dom_target.innerHTML = letter + letter.toLowerCase();
                } else {
                    dom_target.innerHTML = letter
                }

                return false;
            }
        }();
    </script>
</head>
<body>
    <div id="target">
        <div id="startup">Press any letter</div>
    </div>
</body>
</html>